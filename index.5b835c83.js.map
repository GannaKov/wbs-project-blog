{"mappings":"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","sources":["src/index.js","src/js/customFunction/currentLinkOperation.js","src/js/dropdown/dropdown.js","src/js/controls/readMore.js","src/js/controls/modalAuth.js","src/js/controls/aside.js"],"sourcesContent":["'use strict';\nimport { articles } from './js/fakeData';\n\n//------------------------\nimport axios from 'axios';\n\nimport { currentLinkOperation } from './js/customFunction';\nimport { dpdOperation, dpdControl } from './js/dropdown';\nimport { modalAuthControl, topicsBtnControl } from './js/controls';\n//-----------------\nconst basePath = '/wbs-project-blog/';\nconst BACKENDURL = 'https://posts.free.beeceptor.com/posts';\nconst contentList = document.querySelector('.content-list');\n\nif (\n  window.location.pathname === '/' ||\n  window.location.pathname === `${basePath}`\n) {\n  //window.location.href = `${basePath}index.html`;\n  // console.log('window.location.href', window.location.href);\n  // console.log('window.location.pathname', window.location.pathname);\n  // console.log(`${window.location.pathname}index.html`);\n  // console.log(`${window.location.href}index.html`);\n  window.location.href = `${window.location.href}index.html`;\n}\n// if (window.location.pathname.endsWith('/')) {\n//   // Перенаправить на главную страницу без \"index.html\" в URL\n//   window.location.href = window.location.href.replace('/', '/index.html');\n// }\n//-------------------\n\n//---------------\ncurrentLinkOperation();\ndpdOperation();\ndpdControl();\ntopicsBtnControl();\nfunction setOutput(event, data) {\n  const selectedOptionValue = data.item.value;\n}\nmodalAuthControl();\n//contentControl(); //надо сделать export/import ВЕРНУТЬ ДЛЯ ФЕТЧ!!!!!\n//-------\n//--------\nfunction contentControl() {\n  // console.log('in contentControl');\n  fetchArticles()\n    .then(response => {\n      renderArticlesList(response.data);\n    })\n    .catch(error => {\n      console.log(error);\n    });\n}\nasync function fetchArticles() {\n  // console.log('in fetchArticles');\n  const response = await axios(`${BACKENDURL}`);\n  return response;\n}\n\nfunction renderArticlesList(articles) {\n  let contentMarkup;\n  if (articles.length > 0) {\n    console.log('articles in render', articles);\n    contentMarkup = articles\n      .map(\n        article =>\n          `<li class=\"content-list__item\"> <article class=\"article__wrapper\">\n        <h2 class=\"article__title\">${article.title}</h2>\n        <p class=\"article__date\">${article.date}</p>\n        <div class=\"article__internal\">\n          <img class=\"article__img\" src=${article.url} alt=${article.title}/>\n          <div class=\"article__text\">\n            <p>${article.article}</p> </div>\n        </div>\n      </article>\n      <a class=\"content-list__link\" data-post=\"${article.id}\"\n        href=\"\">Read more...</a>\n        <p class=\"content-list__comments\">\n       <span class=\"text-dashed\"><span class=\"comments-quantity\">${article.comments.length}</span>&nbsp;comments</span>\n      </p>\n    </li>`\n      )\n      .join('');\n  } else {\n    contentMarkup = `<li class=\"content-list__item\"><p style=\"text-align:center\">UPS... Nothing found!</p></li>`;\n  }\n\n  contentList.insertAdjacentHTML('beforeend', contentMarkup);\n  // const readMoreLinks = document.querySelectorAll('.content-list__link');\n  //readMoreLinkOperation(readMoreLinks);\n}\n//----------------read more\nfunction readMoreLinkOperation() {\n  contentList.addEventListener('click', onClickReadMoreLink);\n}\n\n// function readMoreLinkOperation(readMoreLinks) { Work!!!! back or not?\n//   readMoreLinks.forEach(link => {\n//     link.addEventListener('click', onClickReadMoreLink);\n//   });\n// }\n\nfunction onClickReadMoreLink(e) {\n  e.preventDefault();\n\n  // fetchArticle(e.target.dataset.post);//ЭТО НАДО ДЛЯ ФЕТЧ!!!!! ТОЛЬКО НАДО ПЕРЕЙТИ НА АРТИКЛ ДЖС\n\n  window.location.href = `./article-page.html?post=${e.target.dataset.post}`;\n}\n//./article-page.html/${article.id}\n\nrenderArticlesList(articles); //УБРАТЬ ДЛЯ ФЕТЧ!!!!!!\n//поменять ссылку на кнопку readmore\nreadMoreLinkOperation(); //????????????\n//-----------------aside--------\n//---------------- topic -----\nconst topicLict = document.querySelector('.topics-list');\n\nfunction onTopicClick(e) {\n  //e.preventDefault();\n\n  const targetTag = e.target.textContent;\n\n  const tagPosts = articles.filter(article => {\n    return article.tags.includes(targetTag);\n  });\n  contentList.innerHTML = '';\n  //----\n  const dpdButton = document.querySelector('.ui-selectmenu-text');\n  dpdButton.textContent = 'Choose the country';\n  //----\n  renderArticlesList(tagPosts);\n}\nfunction topicsControl() {\n  topicLict.addEventListener('click', onTopicClick);\n}\ntopicsControl();\n//------------------dpd contries\n\nexport function setOutput(event, data) {\n  const selectedOptionValue = data.item.value;\n\n  const countryChoicePosts = articles.filter(article => {\n    return article.country.includes(selectedOptionValue);\n  });\n  contentList.innerHTML = '';\n  window.location.href = `./index.html#${selectedOptionValue.toLowerCase()}`;\n  renderArticlesList(countryChoicePosts);\n}\n","const links = document.querySelectorAll('.header-nav__link');\n\nfunction setCurrentLink() {\n  const currentPage = window.location.pathname.split('/').pop();\n  //const links = document.querySelectorAll('.header-nav__link');\n\n  links.forEach(link => {\n    if (link.getAttribute('href').split('/').pop() === currentPage) {\n      link.classList.add('current-link');\n    } else {\n      link.classList.remove('current-link');\n    }\n  });\n}\nexport function currentLinkOperation() {\n  document.addEventListener('DOMContentLoaded', onCurrentLinkOperation);\n}\n\nfunction onCurrentLinkOperation() {\n  setCurrentLink();\n\n  //const links = document.querySelectorAll('.header-nav__link');\n  links.forEach(link => {\n    link.addEventListener('click', function (event) {\n      const href = link.getAttribute('href');\n      const lastPathSegment = href.split('/').pop();\n      console.log('lastPathSegment', lastPathSegment);\n      console.log('window.location.hash', window.location.hash);\n      console.log('hash', window.location.hash);\n\n      if (\n        lastPathSegment === window.location.pathname.split('/').pop() &&\n        !window.location.hash\n      ) {\n        event.preventDefault();\n      }\n    });\n  });\n}\n","// import { $, jQuery } from 'jquery';\nimport { setOutput } from '../../index.js';\n('use strict');\nconst countries = [\n  'Italy',\n  'Germany',\n  'Egypt',\n  'Greece',\n  'Sweden',\n  'Poland',\n  'Slovakia',\n  'Finland',\n  'Thailand',\n  'Philippines',\n  'Cuba',\n  'Mexico',\n  'Spain',\n  'Austria',\n];\nconst sortedCountries = [...countries].sort((a, b) => a.localeCompare(b));\n\nconst dpd = document.querySelector('.dpd-select');\n\nexport function dpdOperation() {\n  $('#country').selectmenu().selectmenu('menuWidget').addClass('overflow');\n  $('.dpd-select').selectmenu({\n    width: 240,\n  });\n  renderMenu(dpd, sortedCountries);\n  const dpdButton = document.querySelector('.ui-selectmenu-text');\n  dpdButton.textContent = 'Choose the country';\n}\n\nfunction renderMenu(el, arr) {\n  const markup = arr\n    .map(item => `<option value=${item}>${item} </option>`)\n    .join('');\n\n  el.insertAdjacentHTML('beforeend', markup);\n}\n\n//---------------------- change\n\nexport function dpdControl() {\n  // dpd.addEventListener('change', setOutput);\n  $('.dpd-select').selectmenu({\n    change: function (event, data) {\n      setOutput(event, data);\n    },\n  });\n  // $('.dpd-select').selectmenu('refresh');\n}\n","import axios from 'axios';\n// const BACKENDURL = 'https://posts.free.beeceptor.com/posts';\nconst oneArticle = document.querySelector('.oneArticle-article');\nconst oneArticleComments = document.querySelector('.oneArticle-comments');\nconst commentsList = document.querySelector('.comments-list');\n// выше с артикле пейдж джис\n//const readMoreLink = document.querySelector('.content-list__link-1');\n\n//// const oneArticle = document.querySelector('.oneArticle-article');\n\n// export function onListenerReadMore() {\n//   readMoreLink.addEventListener('click', onReadMoreClick);\n// }\nexport function onClickReadMoreLink(e) {\n  //e.preventDefault();\n  //cleanRender(refs.galleryEl);\n  fetchArticle(e.target.dataset.post);\n}\n//----это я взяла со страницы atricle.js\nfunction fetchArticle(postId) {\n  fetchData(postId)\n    .then(response => {\n      articleMarkup(response.data);\n    })\n    .catch(error => {\n      articleMarkup(undefined);\n      console.log(error);\n    });\n}\nasync function fetchData(postId) {\n  const BACKENDURL = 'https://posts.free.beeceptor.com/posts';\n  const response = await axios(`${BACKENDURL}/${postId}`);\n\n  return response;\n}\nfunction articleMarkup(post) {\n  const basicMarkup = post\n    ? `<h1 class=\"article__title\">${post.title}</h1>\n  <p class=\"article__date\">${post.date}</p>\n  <div class=\"article__internal\">\n   <img class=\"oneArticle__img\" src=${post.url} alt=\"\" />\n        <div class=\"article__text\">\n        <p>${post.article}\n         </p>\n        </div>\n      </div>`\n    : `<img class=\"oneArticle__img\" src=\"https://lh3.googleusercontent.com/pw/ADCreHcClQVGI7nNzHleVGwCxYCt6wYC0tfD-OVcW0nzAFCaQG92vYts_uFpHNDZ1XduZJ_TXKumBRMMPTBhuU6sTp58lUXnlU84gS_mL8r8vfixh38htNbn=w2400\" alt=\"\" />\n    <div class=\"article__text\">\n        <p>UPS.... somthing is wrong (</p>\n        <p>Perhaps my limits</p>\n        </div>`;\n\n  oneArticle.innerHTML = basicMarkup;\n  if (post.comments) {\n    const commentsQuantityMarkup = `<div class=\"comments-quantity-style\"><p class=\"text-dashed \"\n          ><span class=\"comments-quantity\">${post.comments.length}</span>&nbsp;comments:</p></div>`;\n    oneArticleComments.innerHTML = commentsQuantityMarkup;\n    const commentsListMarkup = post.comments.map(\n      comment => `<li class=\"comments-item\">\n<p class=\"comments-author\">${comment.author}</p>\n<p class=\"comments-date\">${comment.date}</p>\n<div class=\"comments-text\"><p>${comment.text}</p></div>\n        </li> `\n    );\n    commentsList.innerHTML = commentsListMarkup;\n  }\n}\n\n// до сюда\n// function onReadMoreClick(event) {\n//   event.preventDefault();\n//   const postId = 1;\n\n//   window.location.href = `./article-page.html?post=${postId}`;\n//   readMoreLink.removeEventListener('click', onReadMoreClick);\n// }\n\n//// function onReadMoreClick(event) {\n//   event.preventDefault();\n//   const postId = 1;\n//   fetchArticle(postId);\n//   readMore.removeEventListener('click', onReadMoreClick);\n//}\n// async function fetchData(postId) {\n//   const response = await axios(`${BASEURL}/${postId}`);\n//   console.log(response.data);\n//   return response;\n// }\n// function fetchArticle(postId) {\n//   fetchData(postId).then(response => {\n//     articleMarkup(response.data);\n//   });\n// }\n// function articleMarkup(post) {\n//   console.log('in articleMarkup ');\n//   const basicMarkup = `<h1 class=\"article__title\">${post.title}</h1>\n//   <p class=\"article__date\">${post.date}</p>\n//   <div class=\"article__internal\">\n//    <img class=\"oneArticle__img\" src=${post.url} alt=\"\" />\n//         <div class=\"article__text\">\n//         <p>${post.article}\n//          </p>\n//         </div>\n//       </div>`;\n//   console.log('basic', basicMarkup);\n//   oneArticle.innerHTML = basicMarkup;\n//// }\n","const bodyEl = document.querySelector('body');\nconst backdropAuth = document.querySelector('.backdrop-auth-user');\n\nconst modalAuthOpenBtn = document.querySelector('.log_open_btn');\nconst modalAuthCloseBtn = document.querySelector('.modal-auth__button-close');\nconst modalFormAuth = document.querySelector('.form-auth');\nconst modalAuthRegBtn = document.querySelector('.form-auth__button-reg');\nexport function modalAuthControl() {\n  modalAuthOpenBtn.addEventListener('click', toggleModalAuth);\n  modalAuthCloseBtn.addEventListener('click', toggleModalAuth);\n  modalAuthRegBtn.addEventListener('click', onRegBtnClick);\n  modalFormAuth.addEventListener('submit', onFormAuthSubmit);\n  //   modalAuthOpenBtn.addEventListener('click', onModalAuthOpenBtnClick);\n  //   modalAuthCloseBtn.addEventListener('click', onModalAuthCloseBtnClick);\n}\n// function onModalAuthOpenBtnClick() {\n//   backdropAuth.classList.remove('is-hidden');\n\n//   bodyEl.classList.add('modal-open');\n// }\n// function onModalAuthCloseBtnClick() {\n//   backdropAuth.classList.add('is-hidden');\n\n//   bodyEl.classList.remove('modal-open');\n// }\nfunction toggleModalAuth() {\n  console.log('in toggle');\n  backdropAuth.classList.toggle('is-hidden');\n  bodyEl.classList.toggle('modal-open');\n}\nfunction onRegBtnClick(e) {\n  e.preventDefault();\n}\nfunction onFormAuthSubmit(e) {\n  e.preventDefault();\n}\n","const topicsBtn = document.querySelector('.topics__button');\nconst topicsList = document.querySelector('.topics-list');\nconst topicsIconDown = document.querySelector('.topics__icon--down');\nconst topicsIconUp = document.querySelector('.topics__icon--up');\nexport function topicsBtnControl() {\n  topicsBtn.addEventListener('click', onTopicsBtnClick);\n}\nfunction onTopicsBtnClick(e) {\n  e.preventDefault();\n  topicsList.classList.toggle('full-size');\n  topicsIconDown.classList.toggle('hidden');\n  topicsIconUp.classList.toggle('hidden');\n}\n"],"names":["parcelRequire","$cac16397e49d5ef8$var$links","document","querySelectorAll","$cac16397e49d5ef8$var$onCurrentLinkOperation","currentPage","window","location","pathname","split","pop","forEach","link","getAttribute","classList","add","remove","addEventListener","event","lastPathSegment","console","log","hash","preventDefault","$107e0dc3f68f5c24$var$sortedCountries","$parcel$interopDefault","sort","a","b","localeCompare","$107e0dc3f68f5c24$var$dpd","querySelector","$d74c0f1895939696$var$bodyEl","$d74c0f1895939696$var$backdropAuth","$d74c0f1895939696$var$modalAuthOpenBtn","$d74c0f1895939696$var$modalAuthCloseBtn","$d74c0f1895939696$var$modalFormAuth","$d74c0f1895939696$var$modalAuthRegBtn","$d74c0f1895939696$var$toggleModalAuth","toggle","$d74c0f1895939696$var$onRegBtnClick","e","$d74c0f1895939696$var$onFormAuthSubmit","$4f9d3ccf88f588f6$var$topicsBtn","$4f9d3ccf88f588f6$var$topicsList","$4f9d3ccf88f588f6$var$topicsIconDown","$4f9d3ccf88f588f6$var$topicsIconUp","$4f9d3ccf88f588f6$var$onTopicsBtnClick","el","markup","$b8f9b7833fa37166$var$contentList","$b8f9b7833fa37166$var$renderArticlesList","articles1","contentMarkup","length","map","article","concat","title","date","url","id","comments","join","insertAdjacentHTML","$b8f9b7833fa37166$var$onClickReadMoreLink","href","target","dataset","post","$b8f9b7833fa37166$var$onTopicClick","targetTag","textContent","tagPosts","$fMuQU","articles","filter","tags","includes","innerHTML","$","selectmenu","addClass","width","item","change","data","selectedOptionValue","value","countryChoicePosts","country","toLowerCase"],"version":3,"file":"index.5b835c83.js.map"}