{"mappings":"oeAAA,IAAAA,EAAAC,EAAA,S,WCAA,MAAMC,EAAQC,SAASC,iBAAiB,qBAkBxC,SAASC,KAhBT,WACE,MAAMC,EAAcC,OAAOC,SAASC,SAASC,MAAM,KAAKC,MAGxDT,EAAMU,SAAQC,IACRA,EAAKC,aAAa,QAAQJ,MAAM,KAAKC,QAAUL,EACjDO,EAAKE,UAAUC,IAAI,gBAEnBH,EAAKE,UAAUE,OAAO,eAAe,G,CASzCC,GAGAhB,EAAMU,SAAQC,IACZA,EAAKM,iBAAiB,SAAS,SAAUC,GAC1BP,EAAKC,aAAa,QACFJ,MAAM,KAAKC,QAEhBJ,OAAOC,SAASC,SAASC,MAAM,KAAKC,OAC1DS,EAAMC,gB,GAER,G,CDtBN,MAEMC,EAAcnB,SAASoB,cAAc,iBAgC3C,SAASC,EAAmBC,GAE1B,MAAMC,EAAgBD,EACnBE,KACCC,GACE,0GAC6BA,EAAQC,gDACVD,EAAQE,8FAEDF,EAAQG,WAAWH,EAAQC,kEAEpDD,EAAQA,wGAGwBA,EAAQI,wJAGUJ,EAAQK,SAASC,8DAI/EC,KAAK,IAERb,EAAYc,mBAAmB,YAAaV,IAO9C,SAA+BW,GAC7BA,EAAczB,SAAQC,IACpBA,EAAKM,iBAAiB,QAASmB,EAAoB,G,CANrDC,CAFsBpC,SAASC,iBAAiB,uB,CAYlD,SAASkC,EAAoBE,GAC3BA,EAAEnB,iBAGwCoB,QAAlCC,IAAI,SAAUF,EAAEG,OAAOC,QAAQC,MACvCJ,QAAQC,IAAI,OAAQ,4BAA4BF,EAAEG,OAAOC,QAAQC,QACjEtC,OAAOC,SAASsC,KAAO,4BAA4BN,EAAEG,OAAOC,QAAQC,M,CAtEvC,MAA7BtC,OAAOC,SAASC,UACa,uBAA7BF,OAAOC,SAASC,WAEhBF,OAAOC,SAASsC,KAAO,gCCFvB3C,SAASgB,iBAAiB,mBAAoBd,GDyEhDmB,EAAmBxB,EAAA+C","sources":["src/index.js","src/js/customFunction/currentLinkOperation.js"],"sourcesContent":["'use strict';\nimport { articles } from './js/fakeData';\n//------------------------\nimport axios from 'axios';\n\nimport { currentLinkOperation } from './js/customFunction';\n\n//-----------------\nconst basePath = '/wbs-project-blog/';\nconst BACKENDURL = 'https://posts.free.beeceptor.com/posts';\nconst contentList = document.querySelector('.content-list');\n\n// Перенаправляем на базовую страницу, если путь не указан\nif (\n  window.location.pathname === '/' ||\n  window.location.pathname === `${basePath}`\n) {\n  window.location.href = `${basePath}index.html`;\n}\n//-------------------\n\n//---------------\ncurrentLinkOperation();\n//contentControl(); //надо сделать export/import ВЕРНУТЬ ДЛЯ ФЕТЧ!!!!!\n//-------\n//--------\nfunction contentControl() {\n  // console.log('in contentControl');\n  fetchArticles()\n    .then(response => {\n      renderArticlesList(response.data);\n    })\n    .catch(error => {\n      console.log(error);\n    });\n}\nasync function fetchArticles() {\n  // console.log('in fetchArticles');\n  const response = await axios(`${BACKENDURL}`);\n  return response;\n}\n\nfunction renderArticlesList(articles) {\n  // console.log('articles in render', articles);\n  const contentMarkup = articles\n    .map(\n      article =>\n        `<li class=\"content-list__item\"> <article class=\"article__wrapper\">\n        <h2 class=\"article__title\">${article.title}</h2>\n        <p class=\"article__date\">${article.date}</p>\n        <div class=\"article__internal\">\n          <img class=\"article__img\" src=${article.url} alt=${article.title}/>\n          <div class=\"article__text\">\n            <p>${article.article}</p> </div>\n        </div>\n      </article>\n      <a class=\"content-list__link\" data-post=\"${article.id}\"\n        href=\"\">Read more...</a> \n        <p class=\"content-list__comments\">\n       <span class=\"text-dashed\"><span class=\"comments-quantity\">${article.comments.length}</span>&nbsp;comments</span>\n      </p>\n    </li>`\n    )\n    .join('');\n  // console.log('contentMarkup', contentMarkup);\n  contentList.insertAdjacentHTML('beforeend', contentMarkup);\n  const readMoreLinks = document.querySelectorAll('.content-list__link');\n  // console.log('readMoreLinks', readMoreLinks);\n  readMoreLinkOperation(readMoreLinks);\n}\n//--------------------------------------read more\n\nfunction readMoreLinkOperation(readMoreLinks) {\n  readMoreLinks.forEach(link => {\n    link.addEventListener('click', onClickReadMoreLink);\n  });\n}\n\nfunction onClickReadMoreLink(e) {\n  e.preventDefault();\n  //cleanRender(refs.galleryEl);\n  // fetchArticle(e.target.dataset.post);//ЭТО НАДО ДЛЯ ФЕТЧ!!!!! ТОЛЬКО НАДО ПЕРЕЙТИ НА АРТИКЛ ДЖС\n  console.log('target', e.target.dataset.post);\n  console.log('href', `./article-page.html?post=${e.target.dataset.post}`);\n  window.location.href = `./article-page.html?post=${e.target.dataset.post}`;\n}\n//./article-page.html/${article.id}\n\nrenderArticlesList(articles); //УБРАТЬ ДЛЯ ФЕТЧ!!!!!!\n//поменять ссылку на кнопку readmore\n","const links = document.querySelectorAll('.header-nav__link');\n\nfunction setCurrentLink() {\n  const currentPage = window.location.pathname.split('/').pop();\n  //const links = document.querySelectorAll('.header-nav__link');\n\n  links.forEach(link => {\n    if (link.getAttribute('href').split('/').pop() === currentPage) {\n      link.classList.add('current-link');\n    } else {\n      link.classList.remove('current-link');\n    }\n  });\n}\nexport function currentLinkOperation() {\n  document.addEventListener('DOMContentLoaded', onCurrentLinkOperation);\n}\n\nfunction onCurrentLinkOperation() {\n  setCurrentLink();\n\n  //const links = document.querySelectorAll('.header-nav__link');\n  links.forEach(link => {\n    link.addEventListener('click', function (event) {\n      const href = link.getAttribute('href');\n      const lastPathSegment = href.split('/').pop();\n\n      if (lastPathSegment === window.location.pathname.split('/').pop()) {\n        event.preventDefault();\n      }\n    });\n  });\n}\n"],"names":["$foKqC","parcelRequire","$859c87cf85577df1$var$links","document","querySelectorAll","$859c87cf85577df1$var$onCurrentLinkOperation","currentPage","window","location","pathname","split","pop","forEach","link","getAttribute","classList","add","remove","$859c87cf85577df1$var$setCurrentLink","addEventListener","event","preventDefault","$1f0dc3b9307be026$var$contentList","querySelector","$1f0dc3b9307be026$var$renderArticlesList","articles1","contentMarkup","map","article","title","date","url","id","comments","length","join","insertAdjacentHTML","readMoreLinks","$1f0dc3b9307be026$var$onClickReadMoreLink","$1f0dc3b9307be026$var$readMoreLinkOperation","e","console","log","target","dataset","post","href","articles"],"version":3,"file":"index.0e3fc5bc.js.map"}