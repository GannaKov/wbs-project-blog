{"mappings":"gfAAAA,EAAA,S,WAAA,I,aCAMC,G,WAAQC,SAASC,iBAAiB,sBAkBxC,SAASC,IAhBT,IACQC,IAAcC,OAAOC,SAASC,SAASC,MAAM,KAAKC,MAGxDT,EAAMU,SAAQ,SAAAC,GACRA,EAAKC,aAAa,QAAQJ,MAAM,KAAKC,QAAUL,EACjDO,EAAKE,UAAUC,IAAI,gBAEnBH,EAAKE,UAAUE,OAAO,e,IAY1Bf,EAAMU,SAAQ,SAAAC,GACZA,EAAKK,iBAAiB,SAAS,SAAUC,GACvC,IACMC,EADOP,EAAKC,aAAa,QACFJ,MAAM,KAAKC,MACxCU,QAAQC,IAAI,kBAAmBF,GAC/BC,QAAQC,IAAI,uBAAwBf,OAAOC,SAASe,MACpDF,QAAQC,IAAI,OAAQf,OAAOC,SAASe,MAGlCH,IAAoBb,OAAOC,SAASC,SAASC,MAAM,KAAKC,OACvDJ,OAAOC,SAASe,MAEjBJ,EAAMK,gB,OD1Bd,IAEMC,EAActB,SAASuB,cAAc,iBAiC3C,SAASC,EAAmBC,GAC1B,IAAIC,EACAD,EAASE,OAAS,GACpBT,QAAQC,IAAI,qBAAsBM,GAClCC,EAAgBD,EACbG,KACC,SAAAC,G,MACE,0GAEyBC,OADED,EAAQE,MAAM,4CAGTD,OAFPD,EAAQG,KAAK,2FAEaF,OAAnBD,EAAQI,IAAI,SAErCH,OAF4CD,EAAQE,MAAM,8DAK1BD,OAHhCD,EAAQA,QAAQ,kGAMkCC,OAHlBD,EAAQK,GAAG,sJAG+BJ,OAAxBD,EAAQM,SAASR,OAAO,sD,IAIpFS,KAAK,KAERV,EAAiB,6FAGnBJ,EAAYe,mBAAmB,YAAaX,E,CAe9C,SAASY,EAAoBC,GAC3BA,EAAElB,iBAGwCH,QAAlCC,IAAI,SAAUoB,EAAEC,OAAOC,QAAQC,MACvCxB,QAAQC,IAAI,OAAQ,4BAAkDW,OAAtBS,EAAEC,OAAOC,QAAQC,OACjEtC,OAAOC,SAASsC,KAAO,4BAAkDb,OAAtBS,EAAEC,OAAOC,QAAQC,K,CAUtE,SAASE,EAAaL,GAGpB,IAAMM,EAAYN,EAAEC,OAAOM,YAErBC,EAAWC,EAAAC,SAASC,QAAO,SAAArB,GAC/B,OAAOA,EAAQsB,KAAKC,SAASP,E,IAG/BvB,EAAY+B,UAAY,GAExB7B,EAAmBuB,E,CClGnB/C,SAASe,iBAAiB,mBAAoBb,GDiFhDsB,EAAmBwB,EAAAC,UAnBjB3B,EAAYP,iBAAiB,QAASuB,GAuBtBtC,SAASuB,cAAc,gBAgB7BR,iBAAiB,QAAS6B,E","sources":["src/index.js","src/js/customFunction/currentLinkOperation.js"],"sourcesContent":["'use strict';\nimport { articles } from './js/fakeData';\n//------------------------\nimport axios from 'axios';\n\nimport { currentLinkOperation } from './js/customFunction';\n\n//-----------------\nconst basePath = '/wbs-project-blog/';\nconst BACKENDURL = 'https://posts.free.beeceptor.com/posts';\nconst contentList = document.querySelector('.content-list');\n\n// Перенаправляем на базовую страницу, если путь не указан\n// if (\n//   window.location.pathname === '/' ||\n//   window.location.pathname === `${basePath}`\n// ) {\n//   window.location.href = `${basePath}index.html`;\n//   console.log('hier');\n// }\n//-------------------\n\n//---------------\ncurrentLinkOperation();\n//contentControl(); //надо сделать export/import ВЕРНУТЬ ДЛЯ ФЕТЧ!!!!!\n//-------\n//--------\nfunction contentControl() {\n  // console.log('in contentControl');\n  fetchArticles()\n    .then(response => {\n      renderArticlesList(response.data);\n    })\n    .catch(error => {\n      console.log(error);\n    });\n}\nasync function fetchArticles() {\n  // console.log('in fetchArticles');\n  const response = await axios(`${BACKENDURL}`);\n  return response;\n}\n\nfunction renderArticlesList(articles) {\n  let contentMarkup;\n  if (articles.length > 0) {\n    console.log('articles in render', articles);\n    contentMarkup = articles\n      .map(\n        article =>\n          `<li class=\"content-list__item\"> <article class=\"article__wrapper\">\n        <h2 class=\"article__title\">${article.title}</h2>\n        <p class=\"article__date\">${article.date}</p>\n        <div class=\"article__internal\">\n          <img class=\"article__img\" src=${article.url} alt=${article.title}/>\n          <div class=\"article__text\">\n            <p>${article.article}</p> </div>\n        </div>\n      </article>\n      <a class=\"content-list__link\" data-post=\"${article.id}\"\n        href=\"\">Read more...</a>\n        <p class=\"content-list__comments\">\n       <span class=\"text-dashed\"><span class=\"comments-quantity\">${article.comments.length}</span>&nbsp;comments</span>\n      </p>\n    </li>`\n      )\n      .join('');\n  } else {\n    contentMarkup = `<li class=\"content-list__item\"><p style=\"text-align:center\">UPS... Nothing found!</p></li>`;\n  }\n\n  contentList.insertAdjacentHTML('beforeend', contentMarkup);\n  // const readMoreLinks = document.querySelectorAll('.content-list__link');\n  //readMoreLinkOperation(readMoreLinks);\n}\n//----------------read more\nfunction readMoreLinkOperation() {\n  contentList.addEventListener('click', onClickReadMoreLink);\n}\n\n// function readMoreLinkOperation(readMoreLinks) { Work!!!! back or not?\n//   readMoreLinks.forEach(link => {\n//     link.addEventListener('click', onClickReadMoreLink);\n//   });\n// }\n\nfunction onClickReadMoreLink(e) {\n  e.preventDefault();\n\n  // fetchArticle(e.target.dataset.post);//ЭТО НАДО ДЛЯ ФЕТЧ!!!!! ТОЛЬКО НАДО ПЕРЕЙТИ НА АРТИКЛ ДЖС\n  console.log('target', e.target.dataset.post);\n  console.log('href', `./article-page.html?post=${e.target.dataset.post}`);\n  window.location.href = `./article-page.html?post=${e.target.dataset.post}`;\n}\n//./article-page.html/${article.id}\n\nrenderArticlesList(articles); //УБРАТЬ ДЛЯ ФЕТЧ!!!!!!\n//поменять ссылку на кнопку readmore\nreadMoreLinkOperation(); //????????????\n//-----------------aside--------\nconst topicLict = document.querySelector('.topics-list');\n\nfunction onTopicClick(e) {\n  //e.preventDefault();\n\n  const targetTag = e.target.textContent;\n\n  const tagPosts = articles.filter(article => {\n    return article.tags.includes(targetTag);\n  });\n\n  contentList.innerHTML = '';\n\n  renderArticlesList(tagPosts);\n}\nfunction topicsControl() {\n  topicLict.addEventListener('click', onTopicClick);\n}\ntopicsControl();\n//------------------dpd contries\n","const links = document.querySelectorAll('.header-nav__link');\n\nfunction setCurrentLink() {\n  const currentPage = window.location.pathname.split('/').pop();\n  //const links = document.querySelectorAll('.header-nav__link');\n\n  links.forEach(link => {\n    if (link.getAttribute('href').split('/').pop() === currentPage) {\n      link.classList.add('current-link');\n    } else {\n      link.classList.remove('current-link');\n    }\n  });\n}\nexport function currentLinkOperation() {\n  document.addEventListener('DOMContentLoaded', onCurrentLinkOperation);\n}\n\nfunction onCurrentLinkOperation() {\n  setCurrentLink();\n\n  //const links = document.querySelectorAll('.header-nav__link');\n  links.forEach(link => {\n    link.addEventListener('click', function (event) {\n      const href = link.getAttribute('href');\n      const lastPathSegment = href.split('/').pop();\n      console.log('lastPathSegment', lastPathSegment);\n      console.log('window.location.hash', window.location.hash);\n      console.log('hash', window.location.hash);\n\n      if (\n        lastPathSegment === window.location.pathname.split('/').pop() &&\n        !window.location.hash\n      ) {\n        event.preventDefault();\n      }\n    });\n  });\n}\n"],"names":["parcelRequire","$cac16397e49d5ef8$var$links","document","querySelectorAll","$cac16397e49d5ef8$var$onCurrentLinkOperation","currentPage","window","location","pathname","split","pop","forEach","link","getAttribute","classList","add","remove","addEventListener","event","lastPathSegment","console","log","hash","preventDefault","$b8f9b7833fa37166$var$contentList","querySelector","$b8f9b7833fa37166$var$renderArticlesList","articles1","contentMarkup","length","map","article","concat","title","date","url","id","comments","join","insertAdjacentHTML","$b8f9b7833fa37166$var$onClickReadMoreLink","e","target","dataset","post","href","$b8f9b7833fa37166$var$onTopicClick","targetTag","textContent","tagPosts","$fMuQU","articles","filter","tags","includes","innerHTML"],"version":3,"file":"index.cf61ac3b.js.map"}